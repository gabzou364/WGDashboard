> [!TIP]
> üéâ To help us better understand and improve WGDashboard‚Äôs performance, we‚Äôre launching the **WGDashboard Testing Program**. As part of this program, participants will receive free WireGuard VPN access to our server in Toronto, Canada, valid for **24 hours** or up to **1GB of total traffic**‚Äîwhichever comes first. If you‚Äôd like to join, visit [https://wg.wgdashboard.dev/](https://wg.wgdashboard.dev/) for more details!



![](https://wgdashboard-resources.tor1.cdn.digitaloceanspaces.com/Posters/Banner.png)


<p align="center">
  <img alt="WGDashboard" src="https://wgdashboard-resources.tor1.cdn.digitaloceanspaces.com/Logos/Logo-2-Rounded-512x512.png" width="128">
</p>
<h1 align="center">
  <a href="https://wgdashboard.dev">WGDashboard</a>
</h1>
<p align="center">
    <img src="https://img.shields.io/badge/Made_With-Python-blue?style=for-the-badge&logo=python&logoColor=ffffff">
    <img src="https://img.shields.io/badge/Made_With-Vue.js-42b883?style=for-the-badge&logo=vuedotjs&logoColor=ffffff">
    <img src="https://img.shields.io/badge/License-Apache_License_2.0-D22128?style=for-the-badge&logo=apache&logoColor=ffffff">
</p>

<p align="center">
  <a href="https://github.com/WGDashboard/WGDashboard/releases/latest"><img src="https://img.shields.io/github/v/release/donaldzou/wireguard-dashboard?style=for-the-badge"></a>
  <a href="https://wakatime.com/badge/github/donaldzou/WGDashboard"><img src="https://wakatime.com/badge/user/45f53c7c-9da9-4cb0-85d6-17bd38cc748b/project/5334ae20-e9a6-4c55-9fea-52d4eb9dfba6.svg?style=for-the-badge" alt="wakatime"></a>
  <a href="https://hitscounter.dev"><img src="https://hitscounter.dev/api/hit?url=https%3A%2F%2Fgithub.com%2Fdonaldzou%2FWGDashboard&label=Visitor&icon=github&color=%230a58ca&style=for-the-badge"></a>
  <img src="https://img.shields.io/docker/pulls/donaldzou/wgdashboard?logo=docker&label=Docker%20Image%20Pulls&labelColor=ffffff&style=for-the-badge">
  <img src="https://github.com/WGDashboard/WGDashboard/actions/workflows/docker.yml/badge.svg?style=for-the-badge">
  <img src="https://github.com/WGDashboard/WGDashboard/actions/workflows/codeql-analyze.yaml/badge.svg">
</p>
<p align="center"><b>This project is supported by</b></p>
<p align="center">
  <a href="https://m.do.co/c/a84cb9aac585">
    <img src="https://opensource.nyc3.cdn.digitaloceanspaces.com/attribution/assets/SVG/DO_Logo_horizontal_blue.svg" width="201px">
  </a>
</p>
<p align="center">Monitoring WireGuard is not convenient, in most case, you'll need to login to your server and type <code>wg show</code>. That's why this project is being created, to view and manage all WireGuard configurations in an easy way.</p>
<p align="center">Though all these awesome features are present, we are still striving to make it <b>easy to install and use</b></p>

<p align="center"><b><i>This project is not affiliated to the official WireGuard Project</i></b></p>

<h3 align="center">Looking for help or want to chat about this project?</h4>
<p align="center">
  You can reach out at
</p>
<p align="center">
  <a align="center" href="https://discord.gg/72TwzjeuWm" target="_blank"><img src="https://img.shields.io/discord/1276818723637956628?labelColor=ffffff&style=for-the-badge&logo=discord&label=Discord"></a>
  <a align="center" href="https://www.reddit.com/r/WGDashboard/" target="_blank"><img src="https://img.shields.io/badge/Reddit-r%2FWGDashboard-FF4500?style=for-the-badge&logo=reddit"></a>
  <a align="center" href="https://app.element.io/#/room/#wgd:matrix.org" target="_blank"><img src="https://img.shields.io/badge/Matrix_Chatroom-%23WGD-000000?style=for-the-badge&logo=matrix"></a>
</p>
<h3 align="center">Want to support this project?</h4>
<p align="center">
  You can support via <br>
</p>
<p align="center">
  <a align="center" href="https://github.com/sponsors/donaldzou" target="_blank"><img src="https://img.shields.io/badge/GitHub%20Sponsor-2e9a40?style=for-the-badge&logo=github"></a>
  <a align="center" href="https://buymeacoffee.com/donaldzou" target="_blank"><img src="https://img.shields.io/badge/Buy%20me%20a%20coffee-ffdd00?style=for-the-badge&logo=buymeacoffee&logoColor=000000"></a>
  <a align="center" href="https://patreon.com/c/DonaldDonnyZou/membership" target="_blank"><img src="https://img.shields.io/badge/Patreon-000000?style=for-the-badge&logo=patreon&logoColor=ffffff"></a>
</p>

<p align="center">
  <b>or, visit our merch store and support us by purchasing a merch for only $USD 17.00 (Including shipping worldwide & duties)</b>
</p>
<p align="center">
  <a align="center" href="https://merch.wgdashboard.dev" target="_blank"><img src="https://img.shields.io/badge/Merch%20from%20WGDashboard-926183?style=for-the-badge"></a>
</p>

<hr>
<h4 align="center">
  for more information, visit our
</h4>
<h1 align="center">
  <a href="https://wgdashboard.dev">Official Website</a>
</h1>


# Screenshots
<img src="https://wgdashboard-resources.tor1.cdn.digitaloceanspaces.com/Documentation%20Images/sign-in.png" alt=""/>
<img src="https://wgdashboard-resources.tor1.cdn.digitaloceanspaces.com/Documentation%20Images/cross-server.png" alt=""/>
<img src="https://wgdashboard-resources.tor1.cdn.digitaloceanspaces.com/Documentation%20Images/index.png" alt=""/>
<img src="https://wgdashboard-resources.tor1.cdn.digitaloceanspaces.com/Documentation%20Images/new-configuration.png" alt="" />
<img src="https://wgdashboard-resources.tor1.cdn.digitaloceanspaces.com/Documentation%20Images/settings.png" alt="" />
<img src="https://wgdashboard-resources.tor1.cdn.digitaloceanspaces.com/Documentation%20Images/light-dark.png" alt="" />
<img src="https://wgdashboard-resources.tor1.cdn.digitaloceanspaces.com/Documentation%20Images/configuration.png" alt=""/>
<img src="https://wgdashboard-resources.tor1.cdn.digitaloceanspaces.com/Documentation%20Images/add-peers.png" alt="" />
<img src="https://wgdashboard-resources.tor1.cdn.digitaloceanspaces.com/Documentation%20Images/ping.png" alt=""/>
<img src="https://wgdashboard-resources.tor1.cdn.digitaloceanspaces.com/Documentation%20Images/traceroute.png" alt=""/>

# Multi-Node Architecture (New!)

WGDashboard now supports managing multiple WireGuard nodes from a single dashboard! This enables you to:

- **Centralized Management**: Control multiple WireGuard nodes from one interface
- **Automatic Load Balancing**: Intelligently distribute peers across nodes based on load and capacity
- **Panel-Side IP Management**: Allocate IPs from node-specific pools with conflict prevention
- **Remote Peer Operations**: Create, update, and delete peers on remote nodes via secure agent API
- **Health Monitoring**: Real-time health checks and peer statistics for each node
- **Secure Communication**: HMAC-signed requests ensure authenticated and tamper-proof communication
- **Backward Compatible**: Fully compatible with single-node setups - no breaking changes

## Phase 2 Features (Available Now)

- **Intelligent Load Balancing**: Automatic peer distribution based on node capacity and weight
- **Panel-Side IP Management (IPAM)**: Allocate IPs from node-specific pools with conflict prevention
- **Node Health Monitoring**: Real-time health checks and peer statistics
- **Remote Peer Operations**: Create, update, and delete peers on remote nodes via API

See [Phase 2 Documentation](docs/PHASE2_MULTINODE.md) for details.

## Phase 4 Features (NEW!)

WGDashboard Phase 4 adds critical operational capabilities for production deployments:

- **üîç Drift Detection**: Automatically identify configuration mismatches between panel and nodes
  - Unknown peers on nodes not in panel database
  - Missing peers that should be on nodes
  - Configuration differences (allowed IPs, keepalive, etc.)
- **üîß Drift Reconciliation**: Automated or manual drift resolution with safety controls
  - Add missing peers to nodes
  - Update mismatched configurations
  - Remove unknown peers (optional)
  - Detailed action reporting
- **‚öôÔ∏è Per-Node Overrides**: Node-specific configuration parameters
  - Custom listen ports, DNS, MTU, keepalive
  - Override global defaults per node
  - Ideal for multi-region deployments
- **üöÄ Production Agent**: Enterprise-ready FastAPI-based worker
  - Async request handling with FastAPI + uvicorn
  - Structured logging with configurable levels
  - Type-safe request validation with Pydantic
  - Zero-downtime updates via syncconf endpoint
  - Systemd service integration

See [Phase 4 Documentation](docs/PHASE4_MULTINODE.md) for complete feature guide.

## Phase 8 Features (LATEST!)

Phase 8 adds flexible node-to-configuration assignment with automatic peer migration and Cloudflare DNS automation:

- **üîó Config-Node Assignment**: Assign specific nodes to configurations
  - Many-to-many relationships between configs and nodes
  - Mark panel as a node (panel node / is_panel_node)
  - Per-assignment health tracking
- **üåê Cloudflare DNS Automation**: Automatic DNS record management
  - DNS-only mode (no proxy) for WireGuard compatibility
  - Round-robin load distribution
  - Automatic record updates on node changes
  - Support for IPv4 (A) and IPv6 (AAAA) records
- **üîÑ Automatic Peer Migration**: Seamless peer migration when nodes change
  - Triggered on node removal
  - Least-loaded destination selection
  - Preserves peer configuration
  - Detailed migration reporting
- **üìù Audit Logging**: Track all critical system changes
  - Node assignments and removals
  - DNS updates
  - Peer migrations
  - Queryable via API

See [Phase 8 Implementation Summary](PHASE8_IMPLEMENTATION_SUMMARY.md) for complete details.

### Quick Start: Node Assignment & Cloudflare DNS

```bash
# 1. Assign nodes to configuration
curl -X POST http://localhost:10086/api/configs/wg0/nodes \
  -H "Content-Type: application/json" \
  -d '{"node_id": "node1"}'

# 2. Create cluster endpoint with Cloudflare DNS
curl -X POST http://localhost:10086/api/configs/wg0/endpoint-group \
  -H "Content-Type: application/json" \
  -d '{
    "domain": "vpn.example.com",
    "port": 51820,
    "cloudflare_zone_id": "your_zone_id",
    "cloudflare_record_name": "vpn.example.com",
    "ttl": 60
  }'

# 3. List nodes for configuration
curl http://localhost:10086/api/configs/wg0/nodes

# 4. Remove node (triggers automatic peer migration)
curl -X DELETE http://localhost:10086/api/configs/wg0/nodes/node1
```

### Quick Start: Drift Detection

```bash
# Detect drift on a specific node
curl http://your-panel/api/drift/nodes/{node-id}

# Detect drift on all nodes
curl http://your-panel/api/drift/nodes

# Reconcile drift automatically
curl -X POST http://your-panel/api/drift/nodes/{node-id}/reconcile \
  -H "Content-Type: application/json" \
  -d '{"reconcile_missing": true, "reconcile_mismatched": true}'
```

### Quick Start: Production Agent

```bash
# Install production agent
sudo mkdir -p /opt/wgdashboard-agent
sudo cp -r wgdashboard-agent/* /opt/wgdashboard-agent/
cd /opt/wgdashboard-agent
sudo pip3 install -r requirements.txt

# Configure and start
sudo cp .env.example .env
sudo nano .env  # Set WG_AGENT_SECRET
sudo cp wgdashboard-agent.service /etc/systemd/system/
sudo systemctl enable --now wgdashboard-agent
```

## Architecture Documentation

‚úÖ **Node Selection & Load Balancing**
- Auto-select best node based on current load
- Manual node selection for specific routing
- Graceful fallback to local mode

‚úÖ **IP Address Management (IPAM)**
- Per-node IP pools with CIDR configuration
- Automatic IP allocation with first-host reservation
- Conflict detection and retry logic

‚úÖ **Remote Peer Management**
- Create peers on remote nodes via agent API
- Delete peers with automatic IP deallocation
- Transactional safety with rollback on failure

‚úÖ **Enhanced UI**
- Node selection dropdown in peer creation
- Node badge display on peer cards
- Works seamlessly with or without nodes configured

## Quick Start

### New to Multi-Node Setup?

1. **[Read the Node Setup Guide](docs/node-setup.md)** - Complete walkthrough for setting up your first node
2. **[Setup Cloudflare DNS (Optional)](docs/cloudflare-dns-setup.md)** - Enable DNS-based load distribution

### Quick Setup Steps

1. **Deploy Node Agents** on your WireGuard servers
   - Docker: See [Node Setup Guide - Docker](docs/node-setup.md#a-docker-deployment)
   - Systemd: See [Node Setup Guide - Systemd](docs/node-setup.md#b-systemd-deployment)
2. **Register Nodes** in the dashboard
   - Via Web UI or API: [Node Registration](docs/node-setup.md#step-3-register-node-in-panel)
3. **Assign Nodes to Configurations**
   - Link nodes to WireGuard configs: [Node Assignment](docs/node-setup.md#step-4-assign-node-to-configuration)
4. **Configure Cloudflare DNS (Optional)**
   - For cluster endpoints: [Cloudflare Setup](docs/cloudflare-dns-setup.md)
5. **Create Peers** with automatic node selection and IP allocation
6. **Monitor Drift** to ensure configuration integrity

## Documentation

### Setup Guides (Start Here!)
- **[Node Setup Guide](docs/node-setup.md)** - üìò Complete guide for panel and node server setup
- **[Cloudflare DNS Setup Guide](docs/cloudflare-dns-setup.md)** - üåê DNS-only cluster endpoint configuration

### Phase Documentation
- **[Phase 8: Node Assignment & DNS Automation](PHASE8_IMPLEMENTATION_SUMMARY.md)** - LATEST! Config-node assignment, peer migration, Cloudflare DNS
- **[Phase 4: Drift Detection & Production Agent](docs/PHASE4_MULTINODE.md)** - Drift detection, reconciliation, per-node overrides
- **[Phase 2: Peer Management & IPAM](docs/PHASE2_MULTINODE.md)** - Load balancing and IP allocation

### Architecture & Deployment
- **[Multi-Node Architecture](docs/MULTI_NODE_ARCHITECTURE.md)** - Overall architecture and security
- **[Agent Deployment Guide](docs/AGENT_DEPLOYMENT.md)** - Install and configure agents
- **[Example Agent](docs/wg-agent-example.py)** - Simple reference implementation

## Architecture Overview

```
Controller (Dashboard)  ‚Üê‚Üí  Node Agents (WireGuard Servers)
    - Web UI                  - HMAC Authentication
    - API Management          - Peer Operations
    - Health Polling          - Stats Collection
```

The multi-node architecture uses a controller-agent pattern where the main dashboard manages multiple lightweight agents running on WireGuard nodes. All communication is secured with HMAC-SHA256 signatures.
