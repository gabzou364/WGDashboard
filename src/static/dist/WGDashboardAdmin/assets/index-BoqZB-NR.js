import{r as w,o as L,c as u,a as t,b as e,d as h,e as b,t as p,f as n,_ as $,D as y,w as a,T as M,n as k,u as N,g as T,G as H,W as G,h as v,F as A,i as D,j as x,k as S,l as W,S as V}from"./index-LfruuXpB.js";import{L as m}from"./localeText-qDf2OHYq.js";import{M as j}from"./message-BpGi9KTy.js";import"./dayjs.min-HMW81NZF.js";const I={class:"peerSettingContainer w-100 h-100 position-absolute top-0 start-0 overflow-y-scroll"},O={class:"container d-flex h-100 w-100"},U={class:"m-auto modal-dialog-centered dashboardModal"},z={class:"card rounded-3 shadow flex-grow-1"},B={class:"card-header bg-transparent d-flex align-items-center gap-2 border-0 p-4 pb-2"},R={class:"mb-0"},F={class:"card-body px-4 pb-4 d-flex flex-column gap-2"},q={class:"card text-decoration-none",target:"_blank",role:"button",href:"https://discord.gg/72TwzjeuWm"},E={class:"card-body d-flex gap-4 align-items-center"},J={class:"d-flex align-items-center"},P={class:"badge rounded-pill text-bg-primary ms-2"},Y={key:0,class:"spinner-border spinner-border-sm",style:{width:"0.7rem",height:"0.7rem"}},K={key:1},Q={class:"text-muted"},X={class:"card text-decoration-none",href:"https://docs.wgdashboard.dev/",target:"_blank"},Z={class:"card-body d-flex gap-4 align-items-center"},tt={class:"mb-0"},st={class:"text-muted"},et={__name:"helpModal",setup(l){const s=w(!0),g=w(void 0);return L(()=>{s.value=!0,fetch("https://discord.com/api/guilds/1276818723637956628/widget.json").then(c=>c.json()).then(c=>{g.value=c,s.value=!1}).catch(()=>{s.value=!1})}),(c,i)=>(n(),u("div",I,[t("div",O,[t("div",U,[t("div",z,[t("div",B,[t("h4",R,[e(m,{t:"Help"})]),t("button",{type:"button",class:"btn-close ms-auto",onClick:i[0]||(i[0]=d=>c.$emit("close"))})]),t("div",F,[t("a",q,[t("div",E,[i[3]||(i[3]=t("h1",{class:"mb-0"},[t("i",{class:"bi bi-discord"})],-1)),t("div",null,[t("div",J,[i[2]||(i[2]=t("h5",{class:"mb-0"}," Discord Server ",-1)),t("span",P,[s.value?(n(),u("span",Y)):h("",!0),g.value!==void 0&&!s.value?(n(),u("span",K,[i[1]||(i[1]=t("i",{class:"bi bi-person-fill me-2"},null,-1)),b(p(g.value.presence_count)+" Online ",1)])):h("",!0)])]),t("small",Q,[e(m,{t:"Join our Discord server for quick help or chat about WGDashboard!"})])])])]),t("a",X,[t("div",Z,[i[4]||(i[4]=t("h1",{class:"mb-0"},[t("i",{class:"bi bi-hash"})],-1)),t("div",null,[t("h5",tt,[e(m,{t:"Official Documentation"})]),t("small",st,[e(m,{t:"Official documentation contains User Guides and more..."})])])])])])])])])]))}},ot={key:"header",class:"shadow"},at={class:"p-3 d-flex gap-2 flex-column"},nt={class:"d-flex text-body"},it={class:"d-flex flex-column align-items-start gap-1"},lt={class:"mb-0"},dt={class:"mb-0"},rt={class:"list-group"},ct={href:"https://docs.wgdashboard.dev/",target:"_blank",class:"list-group-item list-group-item-action d-flex align-items-center"},ut={target:"_blank",role:"button",href:"https://discord.gg/72TwzjeuWm",class:"list-group-item list-group-item-action d-flex align-items-center"},mt={__name:"agentModal",emits:["close"],setup(l,{emit:s}){const g=s,c=y();return(i,d)=>(n(),u("div",{class:k(["agentContainer m-2 rounded-3 d-flex flex-column text-body",{enabled:N(c).HelpAgent.Enable}])},[e(M,{name:"agent-message"},{default:a(()=>[t("div",ot,[t("div",at,[t("div",nt,[t("div",it,[t("h5",lt,[e(m,{t:"Help"})])]),t("a",{role:"button",class:"ms-auto text-body",onClick:d[0]||(d[0]=o=>g("close"))},[...d[1]||(d[1]=[t("h5",{class:"mb-0"},[t("i",{class:"bi bi-x-lg"})],-1)])])]),t("p",dt,[e(m,{t:"You can visit our: "})]),t("div",rt,[t("a",ct,[d[2]||(d[2]=t("i",{class:"bi bi-book-fill"},null,-1)),e(m,{class:"ms-auto",t:"Official Documentation"})]),t("a",ut,[d[3]||(d[3]=t("i",{class:"bi bi-discord"},null,-1)),e(m,{class:"ms-auto",t:"Discord Server"})])])])])]),_:1})],2))}},gt=$(mt,[["__scopeId","data-v-f37f608d"]]),ft={name:"navbar",components:{HelpModal:et,LocaleText:m,AgentModal:gt},setup(){const l=G(),s=y();return{wireguardConfigurationsStore:l,dashboardConfigurationStore:s}},data(){return{updateAvailable:!1,updateMessage:"Checking for update...",updateUrl:"",openHelpModal:!1,openAgentModal:!1}},computed:{getActiveCrossServer(){if(this.dashboardConfigurationStore.ActiveServerConfiguration)return new URL(this.dashboardConfigurationStore.CrossServerConfiguration.ServerList[this.dashboardConfigurationStore.ActiveServerConfiguration].host)}},async mounted(){await this.wireguardConfigurationsStore.getConfigurations(),await T("/api/getDashboardUpdate",{},l=>{l.status?(l.data&&(this.updateAvailable=!0,this.updateUrl=l.data),this.updateMessage=l.message):(this.updateMessage=H("Failed to check available update"),console.log(`Failed to get update: ${l.message}`))}),this.wireguardConfigurationsStore.ConfigurationListInterval=setInterval(()=>{this.wireguardConfigurationsStore.getConfigurations()},1e4)}},vt=["data-bs-theme"],_t={id:"sidebarMenu",class:"bg-body-tertiary sidebar border h-100 rounded-3 shadow overflow-y-scroll"},bt={class:"sidebar-sticky"},pt={class:"text-white text-center m-0 py-3 mb-2 btn-brand"},ht={key:0,class:"ms-auto"},xt={class:"nav flex-column px-2 gap-1"},Ct={class:"nav-item"},kt={class:"nav-item"},St={class:"nav-item"},$t={class:"nav-item"},yt={class:"nav-item"},wt={class:"nav-item"},Mt={class:"nav-item"},At={class:"nav-item"},Dt={class:"nav-item"},Lt={class:"sidebar-heading px-3 mt-3 mb-1 text-muted text-center"},Nt={class:"nav flex-column px-2 gap-1"},Tt={class:"nav-item"},Ht={class:"sidebar-heading px-3 mt-3 mb-1 text-muted text-center"},Gt={class:"nav flex-column px-2 gap-1"},Wt={class:"nav-item"},Vt={class:"nav-item"},jt={class:"nav-item"},It={class:"nav flex-column px-2 mb-3"},Ot={class:"nav-item"},Ut={class:"nav-item",style:{"font-size":"0.8rem"}},zt=["href"],Bt={class:"nav-link text-muted rounded-3"},Rt={key:1,class:"nav-link text-muted rounded-3"};function Ft(l,s,g,c,i,d){const o=v("LocaleText"),r=v("RouterLink"),C=v("HelpModal"),_=v("AgentModal");return n(),u("div",{class:k(["col-md-3 col-lg-2 d-md-block p-2 navbar-container bg-transparent",{active:this.dashboardConfigurationStore.ShowNavBar}]),"data-bs-theme":c.dashboardConfigurationStore.Configuration.Server.dashboard_theme},[t("nav",_t,[t("div",bt,[t("div",pt,[s[5]||(s[5]=t("h5",{class:"mb-0"}," WGDashboard ",-1)),d.getActiveCrossServer!==void 0?(n(),u("small",ht,[s[4]||(s[4]=t("i",{class:"bi bi-hdd-rack-fill me-2"},null,-1)),b(p(d.getActiveCrossServer.host),1)])):h("",!0)]),t("ul",xt,[t("li",Ct,[e(r,{class:"nav-link rounded-3",to:"/","exact-active-class":"active"},{default:a(()=>[s[6]||(s[6]=t("i",{class:"bi bi-house me-2"},null,-1)),e(o,{t:"Home"})]),_:1})]),t("li",kt,[e(r,{class:"nav-link rounded-3",to:"/settings","active-class":"active"},{default:a(()=>[s[7]||(s[7]=t("i",{class:"bi bi-gear me-2"},null,-1)),e(o,{t:"Settings"})]),_:1})]),t("li",St,[e(r,{class:"nav-link rounded-3",to:"/clients","active-class":"active"},{default:a(()=>[s[8]||(s[8]=t("i",{class:"bi bi-people me-2"},null,-1)),e(o,{t:"Clients"})]),_:1})]),t("li",$t,[e(r,{class:"nav-link rounded-3",to:"/webhooks","active-class":"active"},{default:a(()=>[s[9]||(s[9]=t("i",{class:"bi bi-postcard me-2"},null,-1)),e(o,{t:"Webhooks"})]),_:1})]),t("li",yt,[e(r,{class:"nav-link rounded-3",to:"/nodes","active-class":"active"},{default:a(()=>[s[10]||(s[10]=t("i",{class:"bi bi-hdd-network me-2"},null,-1)),e(o,{t:"Nodes"})]),_:1})]),t("li",wt,[e(r,{class:"nav-link rounded-3",to:"/cloudflare","active-class":"active"},{default:a(()=>[s[11]||(s[11]=t("i",{class:"bi bi-cloud-arrow-up me-2"},null,-1)),e(o,{t:"Cloudflare DNS"})]),_:1})]),t("li",Mt,[e(r,{class:"nav-link rounded-3",to:"/logs","active-class":"active"},{default:a(()=>[s[12]||(s[12]=t("i",{class:"bi bi-journal-text me-2"},null,-1)),e(o,{t:"Logs"})]),_:1})]),t("li",At,[e(r,{class:"nav-link rounded-3",to:"/traffic","active-class":"active"},{default:a(()=>[s[13]||(s[13]=t("i",{class:"bi bi-graph-up me-2"},null,-1)),e(o,{t:"Traffic"})]),_:1})]),t("li",Dt,[t("a",{class:"nav-link rounded-3",role:"button",onClick:s[0]||(s[0]=f=>i.openAgentModal=!0)},[s[14]||(s[14]=t("i",{class:"bi bi-question-circle me-2"},null,-1)),e(o,{t:"Help"})])])]),s[17]||(s[17]=t("hr",{class:"text-body my-2"},null,-1)),t("h6",Lt,[e(o,{t:"WireGuard Configurations"})]),t("ul",Nt,[(n(!0),u(A,null,D(this.wireguardConfigurationsStore.sortConfigurations,f=>(n(),u("li",Tt,[e(r,{to:"/configuration/"+f.Name+"/peers",class:"nav-link nav-conf-link rounded-3","active-class":"active"},{default:a(()=>[t("span",{class:k(["dot me-2",{active:f.Status}])},null,2),b(" "+p(f.Name),1)]),_:2},1032,["to"])]))),256))]),s[18]||(s[18]=t("hr",{class:"text-body my-2"},null,-1)),t("h6",Ht,[e(o,{t:"Tools"})]),t("ul",Gt,[t("li",Wt,[e(r,{to:"/system_status",class:"nav-link rounded-3","active-class":"active"},{default:a(()=>[e(o,{t:"System Status"})]),_:1})]),t("li",Vt,[e(r,{to:"/ping",class:"nav-link rounded-3","active-class":"active"},{default:a(()=>[e(o,{t:"Ping"})]),_:1})]),t("li",jt,[e(r,{to:"/traceroute",class:"nav-link rounded-3","active-class":"active"},{default:a(()=>[e(o,{t:"Traceroute"})]),_:1})])]),s[19]||(s[19]=t("hr",{class:"text-body my-2"},null,-1)),t("ul",It,[t("li",Ot,[t("a",{class:"nav-link text-danger rounded-3",onClick:s[1]||(s[1]=f=>this.dashboardConfigurationStore.signOut()),role:"button",style:{"font-weight":"bold"}},[s[15]||(s[15]=t("i",{class:"bi bi-box-arrow-left me-2"},null,-1)),e(o,{t:"Sign Out"})])]),t("li",Ut,[this.updateAvailable?(n(),u("a",{key:0,href:this.updateUrl,class:"text-decoration-none rounded-3",target:"_blank"},[t("small",Bt,[e(o,{t:this.updateMessage},null,8,["t"]),s[16]||(s[16]=b(" (",-1)),e(o,{t:"Current Version:"}),b(" "+p(c.dashboardConfigurationStore.Configuration.Server.version)+") ",1)])],8,zt)):(n(),u("small",Rt,[e(o,{t:this.updateMessage},null,8,["t"]),b(" ("+p(c.dashboardConfigurationStore.Configuration.Server.version)+") ",1)]))])])])]),e(S,{name:"zoom"},{default:a(()=>[this.openHelpModal?(n(),x(C,{key:0,onClose:s[2]||(s[2]=f=>{i.openHelpModal=!1})})):h("",!0)]),_:1}),e(S,{name:"slideIn"},{default:a(()=>[this.openAgentModal?(n(),x(_,{key:0,onClose:s[3]||(s[3]=f=>i.openAgentModal=!1)})):h("",!0)]),_:1})],10,vt)}const qt=$(ft,[["render",Ft],["__scopeId","data-v-52e4ccf4"]]),Et={name:"index",components:{Message:j,Navbar:qt},async setup(){return{dashboardConfigurationStore:y()}},computed:{getMessages(){return this.dashboardConfigurationStore.Messages.filter(l=>l.show)}}},Jt=["data-bs-theme"],Pt={class:"row h-100"},Yt={class:"col-md-9 col-lg-10 overflow-y-scroll mb-0 pt-2"},Kt={class:"messageCentre text-body position-absolute d-flex"};function Qt(l,s,g,c,i,d){const o=v("Navbar"),r=v("RouterView"),C=v("Message");return n(),u("div",{class:"container-fluid flex-grow-1 main","data-bs-theme":this.dashboardConfigurationStore.Configuration.Server.dashboard_theme},[t("div",Pt,[e(o),t("main",Yt,[(n(),x(V,null,{default:a(()=>[e(r,null,{default:a(({Component:_})=>[e(S,{name:"fade2",mode:"out-in",appear:""},{default:a(()=>[(n(),x(W(_)))]),_:2},1024)]),_:1})]),_:1})),t("div",Kt,[e(M,{name:"message",tag:"div",class:"position-relative flex-sm-grow-0 flex-grow-1 d-flex align-items-end ms-sm-auto flex-column gap-2"},{default:a(()=>[(n(!0),u(A,null,D(d.getMessages.slice().reverse(),_=>(n(),x(C,{message:_,key:_.id},null,8,["message"]))),128))]),_:1})])])])],8,Jt)}const es=$(Et,[["render",Qt],["__scopeId","data-v-0c6a5068"]]);export{es as default};
